import math

# FunciÃ³n para calcular la distancia entre dos puntos
def distancia(ciudad1, ciudad2):
    x1, y1 = ciudad1['x'], ciudad1['y']
    x2, y2 = ciudad2['x'], ciudad2['y']
    return math.sqrt((x2 - x1)**2 + (y2 - y1)**2)

# Algoritmo heurÃ­stico: Vecino MÃ¡s Cercano
def vecino_mas_cercano(ciudades):
    n = len(ciudades)
    visitadas = [False] * n
    ruta_indices = []
    
    # Empezamos en la primera ciudad (Ã­ndice 0)
    actual = 0
    ruta_indices.append(actual)
    visitadas[actual] = True
    
    # Visitamos las demÃ¡s ciudades
    for _ in range(n - 1):
        menor_distancia = float('inf')
        siguiente = -1
        
        # Buscamos la ciudad no visitada mÃ¡s cercana
        for i in range(n):
            if not visitadas[i]:
                dist = distancia(ciudades[actual], ciudades[i])
                if dist < menor_distancia:
                    menor_distancia = dist
                    siguiente = i
        
        ruta_indices.append(siguiente)
        visitadas[siguiente] = True
        actual = siguiente
    
    # Volvemos al inicio
    ruta_indices.append(0)
    return ruta_indices

# Calcular distancia total de la ruta
def calcular_distancia_total(ruta_indices, ciudades):
    total = 0
    for i in range(len(ruta_indices) - 1):
        total += distancia(ciudades[ruta_indices[i]], ciudades[ruta_indices[i+1]])
    return total

# Mostrar la ruta con nombres y distancia
def mostrar_resultado(ciudades, ruta_indices, distancia_total):
    print("\n" + "âœ…" * 30)
    print("ğŸ›£ï¸  TU RUTA RECOMENDADA:")
    print("âœ…" * 30)
    
    ruta_nombres = [ciudades[i]['nombre'] for i in ruta_indices]
    print(" -> ".join(ruta_nombres))
    
    print(f"\nğŸ“ Distancia total recorrida: {distancia_total:.2f} unidades")
    print("\nğŸ“ Detalle de ciudades:")
    for ciudad in ciudades:
        print(f"   {ciudad['nombre']}: ({ciudad['x']}, {ciudad['y']})")

# PROGRAMA PRINCIPAL â€” INTERACTIVO Y AMIGABLE
def main():
    print("ğŸ§³ğŸ§³ğŸ§³ BIENVENIDO AL ASISTENTE DEL VENDEDOR VIAJERO ğŸ§³ğŸ§³ğŸ§³")
    print("ğŸ’¡ Este programa te ayudarÃ¡ a encontrar una ruta corta (no Ã³ptima) para visitar tus ciudades.")
    print("ğŸ“Œ Ingresa el nombre y las coordenadas (x, y) de cada ciudad.\n")
    
    # Preguntar cuÃ¡ntas ciudades
    while True:
        try:
            n = int(input("Â¿CuÃ¡ntas ciudades deseas ingresar? (mÃ­nimo 2): "))
            if n >= 2:
                break
            else:
                print("âš ï¸  Por favor, ingresa al menos 2 ciudades.")
        except ValueError:
            print("âš ï¸  Por favor, ingresa un nÃºmero vÃ¡lido.")
    
    # Lista para almacenar las ciudades
    ciudades = []
    
    print("\n" + "ğŸ“" * 40)
    for i in range(n):
        print(f"\nğŸ”¹ Ciudad #{i+1}")
        nombre = input(f"   Nombre de la ciudad: ").strip()
        while not nombre:
            nombre = input("   âš ï¸  El nombre no puede estar vacÃ­o. Ingresa de nuevo: ").strip()
        
        # Pedir coordenada X
        while True:
            try:
                x = float(input(f"   Coordenada X de {nombre}: "))
                break
            except ValueError:
                print("   âš ï¸  Ingresa un nÃºmero vÃ¡lido para X.")
        
        # Pedir coordenada Y
        while True:
            try:
                y = float(input(f"   Coordenada Y de {nombre}: "))
                break
            except ValueError:
                print("   âš ï¸  Ingresa un nÃºmero vÃ¡lido para Y.")
        
        ciudades.append({'nombre': nombre, 'x': x, 'y': y})


    print("\n" + "â³" * 20)
    print("ğŸ§  Calculando la mejor ruta con inteligencia artificial (heurÃ­stica)...")
    print("â³" * 20)
    
    # Encontrar la ruta
    ruta_indices = vecino_mas_cercano(ciudades)
    distancia_total = calcular_distancia_total(ruta_indices, ciudades)
    
    # Mostrar resultado bonito
    mostrar_resultado(ciudades, ruta_indices, distancia_total)
    
    print("\n" + "ğŸ‰" * 30)
    print("âœ… Â¡Listo! Ruta calculada con Ã©xito.")
    print("ğŸ‰" * 30)
    print("\nğŸ“Œ NOTA: Esta ruta es una buena aproximaciÃ³n, pero no necesariamente la Ã³ptima.")
    print("ğŸ’¡ Algoritmo usado: 'Vecino MÃ¡s Cercano' â€” ideal para principiantes en IA.")

# Ejecutar el programa
if __name__ == "__main__":
    main()
